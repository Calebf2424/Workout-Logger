{% extends "base.html" %}
{% block title %}Programs – Workout Tracker{% endblock %}

{% block content %}
<h1 class="text-white fw-bold mb-4">Program Planner</h1>

<a href="{{ url_for('create_program') }}" class="btn btn-primary w-100 mb-4">➕ Create New Program</a>

{% if programs %}
  <div class="row row-cols-1 g-3">
    {% for p in programs %}
      <div class="col">
        <div class="card home-card p-3">
          <div class="d-flex justify-content-between align-items-center">
            <h5 class="fw-bold mb-0">{{ p.name }}</h5>
            {% if p.active %}
              <span class="badge bg-success">Active</span>
            {% endif %}
          </div>
          <p class="mb-2 text-muted">
            {{ p.days }}-Day Split • {{ "Looping" if p.loop else "One-Time" }}
          </p>

          <div class="d-flex flex-wrap gap-2 mt-2">
            <!-- Summary -->
            <a href="{{ url_for('program_summary', program_id=p.id) }}" class="btn btn-outline-dark btn-sm">📊 Summary</a>

            <!-- Activate -->
            <form method="POST" action="{{ url_for('activate_selected_program', program_id=p.id) }}">
              <select name="start_day" class="form-select form-select-sm d-inline-block w-auto me-1">
                {% for i in range(p.days) %}
                  <option value="{{ i }}">Day {{ i + 1 }}</option>
                {% endfor %}
              </select>
              <button type="submit" class="btn btn-outline-success btn-sm">✅ Activate</button>
            </form>

            <!-- Edit -->
            <a href="{{ url_for('edit_program', program_id=p.id) }}" class="btn btn-outline-primary btn-sm">✏️ Edit</a>

            <!-- Delete -->
            <form method="POST" action="{{ url_for('delete_selected_program', program_id=p.id) }}"
                  onsubmit="return confirm('Delete program: {{ p.name }}?');">
              <button type="submit" class="btn btn-outline-danger btn-sm">🗑️ Delete</button>
            </form>
          </div>
        </div>
      </div>
    {% endfor %}
      <div class="col-12 mt-3 mb-4 text-center">
    <a href="{{ url_for('view_programs') }}" class="btn btn-secondary w-100 py-2">
      Back
    </a>
  </div>
  </div>
{% else %}
  <div class="alert alert-info mt-4 text-center">
    No programs yet. Click "Create New Program" to get started!
  </div>
{% endif %}
{% endblock %}
